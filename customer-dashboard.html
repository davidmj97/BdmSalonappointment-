<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dashboard – BDM Salon</title>
<style>
  :root{--bg:#000;--fg:#fff;--accent:#ffcf33;}
  html,body{margin:0;padding:0;width:100%;min-height:100vh;background:var(--bg);color:var(--fg);font-family:'Helvetica Neue',Arial,sans-serif;}
  body{display:flex;flex-direction:column;}

  /* ===== HEADER ===== */
  .header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;background:#000;}
  .logo{font-size:18px;font-weight:700;letter-spacing:.5px;}
  .right-box{display:flex;align-items:center;gap:12px;}
  .points-badge{font-size:12px;padding:4px 8px;background:#111;border-radius:12px;}
  .profile-icon{position:relative;width:36px;height:36px;border-radius:50%;background:var(--fg);color:var(--bg);display:flex;align-items:center;justify-content:center;font-weight:700;cursor:pointer;}
  .profile-icon::after{content:'✎';position:absolute;top:-4px;right:-4px;width:14px;height:14px;border-radius:50%;background:var(--accent);color:#000;font-size:9px;display:flex;align-items:center;justify-content:center;border:1px solid #000;}

  /* ===== MAIN ===== */
  .main{flex:1;display:flex;flex-direction:column;padding:16px 16px 70px;}
  .welcome{font-size:17px;font-weight:600;margin-bottom:18px;}
  .cta-btn{width:100%;max-width:360px;background:#fff;color:#000;border:none;border-radius:10px;font-size:16px;font-weight:600;padding:14px 0;margin-bottom:24px;cursor:pointer;}

  /* Top services – mobile carousel */
  .services-title{font-size:15px;font-weight:600;margin-bottom:10px;}
  .services{display:flex;gap:12px;overflow-x:auto;padding-bottom:6px;}
  .service-card{min-width:220px;background:#111;border-radius:10px;padding:12px;color:#eee;flex-shrink:0;}
  .service-card h4{margin:0 0 4px;font-size:14px;font-weight:600;color:#fff;}
  .service-meta{font-size:12px;color:#ccc;margin-bottom:6px;}
  .service-desc{font-size:12px;color:#aaa;margin:0;}

  /* ===== MENU BAR (mobile) ===== */
  .menu{position:fixed;bottom:0;left:0;right:0;height:58px;background:#000;border-top:1px solid #fff2;display:flex;justify-content:space-around;z-index:80;}
  .menu-btn{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:12px;color:#fff;opacity:.8;border:none;background:none;}
  .menu-btn.active{opacity:1;color:var(--accent);}
  .menu-btn svg{width:20px;height:20px;margin-bottom:2px;stroke:currentColor;fill:none;}

  /* ===== ACCOUNT SHEET ===== */
  .sheet{position:fixed;left:0;right:0;bottom:-100%;background:#fff;color:#000;border-top-left-radius:18px;border-top-right-radius:18px;box-shadow:0 -4px 20px #0005;transition:bottom .35s ease;z-index:100;padding:18px 20px 32px;max-height:88vh;overflow-y:auto;font-size:14px;}
  .sheet.open{bottom:0;}
  .sheet h3{margin:0 0 14px;text-align:center;font-size:16px;}
  .sheet input{width:100%;padding:10px;font-size:14px;border:1.2px solid #ccc;border-radius:6px;margin-bottom:12px;}
  .sheet button{padding:12px;font-size:14px;border:none;border-radius:8px;cursor:pointer;}
  .save-btn{background:#000;color:#fff;margin-top:4px;}
  .close-btn{background:#666;color:#fff;margin-top:6px;}
  .signout-btn{background:#111;color:#fff;width:100%;margin-top:18px;}
  .reset-link{font-size:13px;text-align:center;margin-top:8px;}
  .reset-link a{color:#000;font-weight:600;text-decoration:none;}
  .reset-link a:hover{text-decoration:underline;}

  /* ===== DESKTOP (≥900px) ===== */
  @media(min-width:900px){
    .main{flex-direction:row;gap:24px;padding:24px 8%;}
    .left-col{flex:3;}
    .right-col{flex:2;}
    .services{flex-wrap:wrap;overflow:visible;}
    .service-card{width:calc(50% - 12px);margin-bottom:14px;}
    .menu{display:none;}          /* hide bottom nav */
    .top-tabs{display:flex;gap:22px;margin-bottom:20px;}
    .top-tab{font-size:14px;font-weight:600;cursor:pointer;opacity:.6;}
    .top-tab.active{opacity:1;color:var(--accent);}
  }

  /* Hide mobile scrollbars */
  ::-webkit-scrollbar{display:none;}body{-ms-overflow-style:none;scrollbar-width:none;}
</style>
</head>
<body>
  <!-- ===== Header ===== -->
  <header class="header">
    <div class="logo">BDM Salon</div>
    <div class="right-box">
      <span class="points-badge" id="pointsBadge">0 pts</span>
      <div class="profile-icon" id="profileIcon"></div>
    </div>
  </header>

  <!-- ===== Main ===== -->
  <main class="main">
    <!-- LEFT column (mobile=whole) -->
    <section class="left-col">
      <div class="welcome" id="welcomeMsg"></div>
      <button class="cta-btn" onclick="alert('Booking flow coming soon!')">Book Now</button>

      <!-- Top services -->
      <h3 class="services-title">Top Services</h3>
      <div class="services" id="servicesContainer">
        <!-- cards injected below -->
      </div>
    </section>

    <!-- RIGHT column (desktop) -->
    <section class="right-col" id="rightCol" style="display:none;">
      <div class="top-tabs">
        <span class="top-tab active" id="tabBookings" onclick="showPanel('bookings')">Bookings</span>
        <span class="top-tab"       id="tabAbout"    onclick="showPanel('about')">About</span>
      </div>

      <div id="bookingsPanel">
        <h2 style="font-size:17px;font-weight:600;margin-bottom:18px;">Your Bookings</h2>
        <p style="color:#aaa;font-size:14px;">No bookings yet. Book your first appointment!</p>
      </div>

      <div id="aboutPanel" style="display:none;">
        <h2 style="font-size:17px;font-weight:600;margin-bottom:18px;">About Us</h2>
        <p style="color:#aaa;font-size:14px;">BDM Salon Booking: Your style, our passion.<br/>Luxury grooming at your fingertips.</p>
        <span style="font-size:12px;color:#555;">Version 1.0</span>
      </div>
    </section>
  </main>

  <!-- ===== Bottom nav (mobile only) ===== -->
  <nav class="menu">
    <button class="menu-btn active" id="btnHome" onclick="scrollToTop()">
      <svg viewBox="0 0 24 24"><path d="M4 12 12 5l8 7" stroke-width="2"/><path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7" stroke-width="2"/></svg>
      Home
    </button>
    <button class="menu-btn" id="btnBookings" onclick="showPanel('bookings')">
      <svg viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2" stroke-width="2"/><path d="M16 3v4M8 3v4M3 11h18" stroke-width="2"/></svg>
      Bookings
    </button>
    <button class="menu-btn" id="btnAbout" onclick="showPanel('about')">
      <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-width="2"/><path d="M12 16v-4" stroke-width="2"/><circle cx="12" cy="8" r="1" stroke-width="2"/></svg>
      About
    </button>
  </nav>

  <!-- ===== Account sheet ===== -->
  <aside class="sheet" id="accountSheet">
    <h3>Account</h3>
    <input id="displayName" placeholder="Full name">
    <input id="phone" placeholder="Phone number">
    <input id="email" placeholder="Email">
    <div class="reset-link">Forgot password? <a href="#" id="resetPwdLink">Reset</a></div>

    <!-- inline reset form (hidden) -->
    <div id="resetBox" style="display:none;margin-top:10px;">
      <input id="resetEmail" placeholder="Enter your email">
      <button class="save-btn" id="sendResetBtn" style="margin-top:4px;">Send Reset Link</button>
    </div>

    <button class="save-btn" id="saveBtn">Save Changes</button>
    <button class="close-btn" id="closeSheetBtn">Close</button>
    <button class="signout-btn" onclick="signOut()">Sign Out</button>
  </aside>

<!-- ================= Firebase & Logic ================== -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script>
/* ---------- Firebase init ---------- */
firebase.initializeApp({
  apiKey:"AIzaSyAmimDsjW_pF2NGw-w-40QzTsgmf1tdqyI",
  authDomain:"bdmsalonappointment.firebaseapp.com",
  projectId:"bdmsalonappointment"
});
const auth=firebase.auth();

/* ---------- DOM refs ---------- */
const profileIcon   = document.getElementById('profileIcon');
const sheet         = document.getElementById('accountSheet');
const closeSheetBtn = document.getElementById('closeSheetBtn');
const saveBtn       = document.getElementById('saveBtn');
const displayNameIn = document.getElementById('displayName');
const phoneIn       = document.getElementById('phone');
const emailIn       = document.getElementById('email');
const pointsBadge   = document.getElementById('pointsBadge');
const welcomeMsg    = document.getElementById('welcomeMsg');
const resetPwdLink  = document.getElementById('resetPwdLink');
const resetBox      = document.getElementById('resetBox');
const sendResetBtn  = document.getElementById('sendResetBtn');
const resetEmailIn  = document.getElementById('resetEmail');

/* ---------- Services cards ---------- */
const services=[
  {name:"Haircut",price:"$25",desc:"Classic cut & style",pts:30},
  {name:"Hair Coloring",price:"$60",desc:"Full colour",pts:70},
  {name:"Beard Trim",price:"$15",desc:"Shape & line-up",pts:20},
  {name:"Facial",price:"$40",desc:"Deep cleansing",pts:45},
  {name:"Manicure",price:"$22",desc:"Clean & polish",pts:28},
  {name:"Pedicure",price:"$28",desc:"Spa pedicure",pts:34},
  {name:"Make-up",price:"$55",desc:"Event glam",pts:65},
  {name:"Blow-dry",price:"$18",desc:"Quick styling",pts:22},
  {name:"Hair Spa",price:"$50",desc:"Nourishing mask",pts:60},
  {name:"Nail Art",price:"$30",desc:"Creative designs",pts:35}
];
const servicesContainer=document.getElementById('servicesContainer');
services.forEach(s=>{
  servicesContainer.insertAdjacentHTML('beforeend',`
    <div class="service-card">
      <h4>${s.name} – ${s.price}</h4>
      <div class="service-meta">${s.pts} pts</div>
      <p class="service-desc">${s.desc}</p>
    </div>`);});

/* ---------- Auth state ---------- */
auth.onAuthStateChanged(user=>{
  if(!user){location.href='index.html';return;}
  profileIcon.textContent=(user.displayName||'U')[0].toUpperCase();
  welcomeMsg.textContent=`Hi ${(user.displayName||'there')}, ready for your next beauty session?`;
  pointsBadge.textContent="120 pts";               // static demo value
  // Fill sheet fields
  displayNameIn.value=user.displayName||'';
  emailIn.value=user.email||'';
  phoneIn.value=localStorage.getItem('phone_'+user.uid)||'';
});

/* ---------- Sheet open/close ---------- */
profileIcon.onclick=()=>sheet.classList.add('open');
closeSheetBtn.onclick=()=>sheet.classList.remove('open');

/* ---------- Save changes ---------- */
saveBtn.onclick=async()=>{
  const user=auth.currentUser;if(!user)return;
  try{
    if(displayNameIn.value!==user.displayName)await user.updateProfile({displayName:displayNameIn.value});
    if(emailIn.value!==user.email)              await user.updateEmail(emailIn.value);
    localStorage.setItem('phone_'+user.uid,phoneIn.value);
    alert('Saved!');
    sheet.classList.remove('open');
    welcomeMsg.textContent=`Hi ${(displayNameIn.value||'there')}, ready for your next beauty session?`;
    profileIcon.textContent=(displayNameIn.value||'U')[0].toUpperCase();
  }catch(e){alert(e.message);}
};

/* ---------- Reset password ---------- */
resetPwdLink.onclick=e=>{
  e.preventDefault();
  resetBox.style.display='block';
  resetEmailIn.value=emailIn.value;
};
sendResetBtn.onclick=async()=>{
  try{
    await auth.sendPasswordResetEmail(resetEmailIn.value.trim());
    alert('Reset email sent!');
    resetBox.style.display='none';
  }catch(e){alert(e.message);}
};

/* ---------- Sign-out ---------- */
function signOut(){auth.signOut().then(()=>location.href='index.html');}

/* ---------- Mobile tab logic ---------- */
function scrollToTop(){window.scrollTo({top:0,behavior:'smooth'});}
function showPanel(p){
  /* desktop top tabs */
  const isDesktop=window.innerWidth>=900;
  if(isDesktop){
    document.getElementById('tabBookings').classList.toggle('active',p==='bookings');
    document.getElementById('tabAbout').classList.toggle('active',p==='about');
    document.getElementById('bookingsPanel').style.display=p==='bookings'?'block':'none';
    document.getElementById('aboutPanel').style.display=p==='about'?'block':'none';
    return;
  }
  /* mobile bottom tabs */
  document.querySelectorAll('.menu-btn').forEach(btn=>btn.classList.remove('active'));
  if(p==='bookings'){document.getElementById('btnBookings').classList.add('active')}
  if(p==='about'){document.getElementById('btnAbout').classList.add('active')}
  // simple scroll approach – could build separate panels if needed
  if(p==='bookings')alert('Bookings screen (mobile) coming soon!');
  if(p==='about')alert('About screen (mobile) coming soon!');
}
/* show right column on desktop */
if(window.innerWidth>=900)document.getElementById('rightCol').style.display='block';
</script>
</body>
</html>
